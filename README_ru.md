# Сервис проверки кредитных карт

Решение [тестового задания](https://github.com/aristofun/webdevdao/blob/master/test_assignments/credit_card_checker.md) на позицию Ruby on Rails разработчика.

Использована [реализация алгоритма Луна](https://ru.wikibooks.org/wiki/Реализации_алгоритмов/Алгоритм_Луна).

## Описание

Перед тем, как кредитная карта будет передана в финансовое учреждение, обычно имеет смысл провести несколько простых проверок реальности на номер. Числа достаточно длинны, и часто допускаются незначительные ошибки транскрипции, когда карта не сканируется напрямую.

Первая проверка, которую часто делают люди, заключается в проверке соответствия карты известному шаблону одного из принятых поставщиков карт. Вот некоторые из этих шаблонов:

| Тип карты  | Начинается с | Длина номера |
| ---------- | ------------ | ------------ |
| AMEX       | 34 or 37     | 15           |
| Discover   | 6011         | 16           |
| MasterCard | 51-55        | 16           |
| Visa       | 4            | 13 or 16     |

Все эти типы карт также генерируют числа, так что они могут быть проверены алгоритмом Луна, так что обычно это вторые системы проверки. Шаги:

1. Начиная со следующей до последней цифры и продолжая с каждой другой цифры, возвращаясь к началу карты, удвойте цифру
2. Суммируйте все удвоенные и нетронутые цифры в номере
3. Если эта сумма кратна 10, число является действительным

Например, учитывая номер карты `4408 0412 3456 7893`:

```
Шаг 1: 8 4 0 8 0 4 2 2 6 4 10 6 14 8 18 3
Шаг 2: 8+4+0+8+0+4+2+2+6+4+1+0+6+1+4+8+1+8+3 = 70
Шаг 3: 70 % 10 == 0
```

Таким образом, эта карта действительна.

Давайте попробуем ещё, `4417 1234 5678 9112`:

```
Шаг 1: 8 4 2 7 2 2 6 4 10 6 14 8 18 1 2 2
Шаг 2: 8+4+2+7+2+2+6+4+1+0+6+1+4+8+1+8+1+2+2 = 69
Шаг 3: 69 % 10 != 0
```

Эта карта недействительна.

## Возможности

* Проверка соответствия карты известному шаблону одного из принятых поставщиков карт (AMEX, Discover, MasterCard, Visa или Неизвестно)
* Проверка признака соответствия карты алгоритму Луна (Действительный/Недействительный)

## Требования

* Ruby 2.5.0 или новее

## Установка

[Скачайте ZIP](https://github.com/aleksandrilyin/credit-card-checker/archive/master.zip) или клонируйте локально:
``` sh
$ git clone git@github.com:aleksandrilyin/credit-card-checker.git
```

## Использование

Перейдите в директорию:
``` sh
$ cd credit-card-checker
```

Запустите программу:
``` sh
$ ruby credit_card_checker.rb <номер карты>
```

### Примеры использования

``` sh
$ ruby credit_card_checker.rb 4408 0412 3456 7893
Card type: Visa.
That card is valid.
```

``` sh
$ ruby credit_card_checker.rb 4417 1234 5678 9112
Card type: Visa.
That card is not valid.
```
